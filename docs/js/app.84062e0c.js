(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],d=0,h=[];d<i.length;d++)o=i[d],a[o]&&h.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/eth-wallet/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"071b":function(e,t,n){},"0c26":function(e,t,n){"use strict";var r=n("071b"),a=n.n(r);a.a},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"7faf":function(e,t,n){"use strict";var r=n("8fba"),a=n.n(r);a.a},"8fba":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("header",[n("span",[e._v(e._s(e.title)+" ")])]),n("main",[n("Wallet")],1)])},s=[],o=n("d225"),i=n("308d"),c=n("6bb5"),u=n("4e2b"),l=n("9ab4"),d=n("60a3"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wallet"},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-card",[n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[e._v("Balance")])]),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:e.isLoading},on:{click:function(t){return e.loadAccount()}}},[n("v-icon",[e._v("cached")])],1)],1),n("v-card-text",[e._v(e._s(e.wallet.balance)+" bch")]),n("v-card-title",[n("h3",[e._v("Address")])]),n("v-card-text",[e._v(e._s(e.wallet.address))]),n("v-card",{attrs:{flat:""}},[n("qriously",{attrs:{size:e.qrSize},model:{value:e.qrJson,callback:function(t){e.qrJson=t},expression:"qrJson"}})],1)],1),n("v-card",{attrs:{flat:""}},[e._l(e.validation,function(t,r){return n("div",{key:r,staticClass:"errorLabel"},[!0!==t?n("div",[e._v(e._s(t))]):e._e()])}),n("v-card-title",[n("h3",[e._v("Send")])]),n("v-text-field",{attrs:{label:"Address",required:"",placeholder:"ex). bchtest:qqu8yke2c0wylgjpjcdtenrcrylemuc7fsylj0rp9w"},model:{value:e.toAddr,callback:function(t){e.toAddr=t},expression:"toAddr"}}),n("v-text-field",{attrs:{label:"Amount",type:"number",required:""},model:{value:e.toAmount,callback:function(t){e.toAmount=t},expression:"toAmount"}}),n("v-flex",[n("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:e.isLoading,disabled:e.isLoading},on:{click:function(t){return e.onSend()}}},[e._v("SEND")])],1),n("v-flex",[n("v-card-title",[n("h3",[e._v("Result")])]),e._v("\n          "+e._s(e.resultMessage)+"\n        ")],1)],2)],1)],1)],1)],1)},f=[],p=(n("96cf"),n("3b8d")),v=(n("c5f6"),n("b0b4")),b=n("a002"),g=n.n(b),y=n("2517"),w=function(){function e(){Object(o["a"])(this,e),this.host=y["tresturl"],this.network="testnet",this.bitbox=new y["BITBOX"]({restURL:this.host})}return Object(v["a"])(e,[{key:"createAccount",value:function(){var e=this.bitbox.Mnemonic.generate(256),t=this.bitbox.Mnemonic.toSeed(e),n=this.bitbox.HDNode.fromSeed(t,this.network),r=this.bitbox.ECPair.toCashAddress(n.keyPair),a=this.bitbox.ECPair.toLegacyAddress(n.keyPair),s=this.bitbox.ECPair.toWIF(n.keyPair);return{address:r,legacyAddress:a,wif:s}}},{key:"loadBalance",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadDetail(t);case 3:return n=e.sent,e.abrupt("return","balance"in n?n.balance:0);case 7:throw e.prev=7,e.t0=e["catch"](0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadDetail",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.bitbox.Address.details(t);case 3:return n=e.sent,console.log("loadDetail",n),e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t,n,r,a){var s,o,i,c,u,l,d,h,f,p,v,b;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=new this.bitbox.TransactionBuilder(this.network),i=this.bitbox.ECPair.fromWIF(r),console.log("transactionBuilder",o),e.next=6,this.bitbox.Address.utxo(t);case 6:if(c=e.sent,console.log("utxo",c),!("utxos"in c)){e.next=29;break}return u=c.utxos[0],l=u.satoshis,o.addInput(u.txid,u.vout),console.log("addInput"),d=this.bitbox.BitcoinCash.getByteCount({P2PKH:1},{P2PKH:1}),h=l-d,f=this.bitbox.BitcoinCash.toSatoshi(a),console.log("sendAmount",a,l,h,f,d),o.addOutput(n,f),o.addOutput(t,h-a),console.log("addOutput"),p=void 0,o.sign(0,i,p,o.hashTypes.SIGHASH_ALL,l),v=o.build(),b=v.toHex(),console.log("tx",v,b),e.next=27,this.bitbox.RawTransactions.sendRawTransaction(b);case 27:s=e.sent,console.log("result",s);case 29:e.next=35;break;case 31:throw e.prev=31,e.t0=e["catch"](0),console.error(e.t0),e.t0;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}},e,this,[[0,31]])}));function t(t,n,r,a){return e.apply(this,arguments)}return t}()}]),e}(),m=function(){function e(){var t=this;Object(o["a"])(this,e),this.balance=0,this.address="",this.legacyAddress="",this.privateKey="",this.wrapper=new w,this.localStorageKey="bch-wallet",this.load().then(function(e){if(null===e){var n=t.wrapper.createAccount();t.address=n.address,t.legacyAddress=n.legacyAddress,t.privateKey=n.wif,t.save()}else t.address=e.address,t.legacyAddress=e.legacyAddress,t.privateKey=e.privateKey,t.loadBalance()}).catch(function(e){console.error(e)})}return Object(v["a"])(e,[{key:"save",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.a.setItem(this.localStorageKey,this.toJSON());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.a.getItem(this.localStorageKey);case 2:return t=e.sent,null!==t&&(this.address=t.address,this.privateKey=t.privateKey),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadBalance",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.wrapper.loadBalance(this.address);case 2:return this.balance=e.sent,e.abrupt("return",this.balance);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.wrapper.send(this.address,t,this.privateKey,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"toJSON",value:function(){return{address:this.address,legacyAddress:this.legacyAddress,privateKey:this.privateKey}}}]),e}(),x=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isLoading=!1,e.wallet=new m,e.qrSize=200,e.toAmount=0,e.toAddr="",e.qrJson="",e.validation=[],e.resultMessage="",e.rules={senderAddrInput:function(e){var t=/^[a-zA-Z0-9-]+$/;return t.test(e)||"送金先の入力が不正です"},amountInput:function(e){var t=/^[0-9.]+$/;return t.test(e)&&!isNaN(Number(e))||"数量の入力が不正です"}},e}return Object(u["a"])(t,e),Object(v["a"])(t,[{key:"onValueChange",value:function(e,t){console.log("watch: ".concat(e,", ").concat(t)),this.qrJson=e}},{key:"mounted",value:function(){d["b"].prototype.$toast("Hello BitcoinCash Wallet")}},{key:"loadAccount",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.wallet.loadBalance();case 3:this.isLoading=!1;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onSend",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.isValidation()){e.next=19;break}return console.log("OK"),this.resultMessage="",this.isLoading=!0,e.prev=4,e.next=7,this.wallet.send(this.toAddr,this.toAmount);case 7:t=e.sent,n="SUCCESS\n".concat(t),this.resultMessage="txHash: ".concat(t),d["b"].prototype.$toast(n),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),console.error(e.t0),this.resultMessage="Failed ".concat(e.t0),d["b"].prototype.$toast(e.t0);case 18:this.isLoading=!1;case 19:console.log(this.isValidation());case 20:case"end":return e.stop()}},e,this,[[4,13]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"isValidation",value:function(){return this.validation=[],this.validation.push(this.rules.senderAddrInput(this.toAddr)),this.validation.push(this.rules.amountInput("".concat(this.toAmount))),0===this.validation.filter(function(e){return!0!==e}).length}}]),t}(d["b"]);l["a"]([Object(d["c"])("wallet.legacyAddress")],x.prototype,"onValueChange",null),x=l["a"]([d["a"]],x);var k=x,A=k,O=(n("0c26"),n("2877")),j=Object(O["a"])(A,h,f,!1,null,"6c4f1276",null),_=j.exports,S=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.title="BitcoinCash wallet",e}return Object(u["a"])(t,e),t}(d["b"]);S=l["a"]([Object(d["a"])({components:{Wallet:_}})],S);var R=S,C=R,P=(n("7faf"),Object(O["a"])(C,a,s,!1,null,null,null)),B=P.exports,F=n("8c4f");r["default"].use(F["a"]);var K=new F["a"]({mode:"history",base:"/eth-wallet/",routes:[]}),q=n("2f62");r["default"].use(q["a"]);var E=new q["a"].Store({state:{},mutations:{},actions:{}}),L=n("9483");Object(L["a"])("".concat("/eth-wallet/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var I=n("ce5b"),M=n.n(I),J=n("c0a4"),N=n.n(J),T=(n("cc20"),n("7869")),H=n.n(T),$=n("6112"),D=n.n($);r["default"].use(M.a,{theme:{original:N.a.purple.base,theme:"#FFDEEA",background:"#FFF6EA",view:"#ffa07a",select:"#FF7F78",button:"#5FACEF"},options:{themeVariations:["original","secondary"]}}),r["default"].use(H.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),r["default"].use(D.a),r["default"].config.productionTip=!1,new r["default"]({router:K,store:E,render:function(e){return e(B)}}).$mount("#app")}});
//# sourceMappingURL=app.84062e0c.js.map