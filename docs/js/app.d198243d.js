(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],d=0,h=[];d<i.length;d++)s=i[d],a[s]&&h.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/bch-wallet/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"071b":function(e,t,n){},"0c26":function(e,t,n){"use strict";var r=n("071b"),a=n.n(r);a.a},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"7faf":function(e,t,n){"use strict";var r=n("8fba"),a=n.n(r);a.a},"8fba":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("header",[n("span",[e._v(e._s(e.title)+" ")])]),n("main",[n("Wallet")],1)])},o=[],s=n("d225"),i=n("308d"),c=n("6bb5"),u=n("4e2b"),l=n("9ab4"),d=n("60a3"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wallet"},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-card",[n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{flat:""}},[n("v-card-actions",[n("v-card-title",[n("h3",[e._v("Balance")])]),n("v-spacer"),n("v-btn",{attrs:{fab:"",small:"",flat:"",loading:e.isLoading},on:{click:function(t){return e.loadAccount()}}},[n("v-icon",[e._v("cached")])],1)],1),n("v-card-text",[e._v(e._s(e.wallet.balance)+" bch")]),n("v-card-title",[n("h3",[e._v("Address")])]),n("v-card-text",[e._v(e._s(e.wallet.address))]),n("v-card",{attrs:{flat:""}},[n("qriously",{attrs:{size:e.qrSize},model:{value:e.qrJson,callback:function(t){e.qrJson=t},expression:"qrJson"}})],1)],1),n("v-card",{attrs:{flat:""}},[e._l(e.validation,function(t,r){return n("div",{key:r,staticClass:"errorLabel"},[!0!==t?n("div",[e._v(e._s(t))]):e._e()])}),n("v-card-title",[n("h3",[e._v("Send")])]),n("v-text-field",{attrs:{label:"Address",required:"",placeholder:"ex). bchtest:qqu8yke2c0wylgjpjcdtenrcrylemuc7fsylj0rp9w"},model:{value:e.toAddr,callback:function(t){e.toAddr=t},expression:"toAddr"}}),n("v-text-field",{attrs:{label:"Amount",type:"number",required:""},model:{value:e.toAmount,callback:function(t){e.toAmount=t},expression:"toAmount"}}),n("v-flex",[n("v-btn",{staticClass:"white--text",attrs:{color:"blue",loading:e.isLoading,disabled:e.isLoading},on:{click:function(t){return e.onSend()}}},[e._v("SEND")])],1),n("v-flex",[n("v-card-title",[n("h3",[e._v("Result")])]),e._v("\n          "+e._s(e.resultMessage)+"\n        ")],1)],2)],1)],1)],1)],1)},f=[],v=(n("96cf"),n("c5f6"),n("b0b4")),p=n("a002"),b=n.n(p),g=n("2517"),w=function(){function e(){Object(s["a"])(this,e),this.host=g["tresturl"],this.network="testnet",this.bitbox=new g["BITBOX"]({restURL:this.host})}return Object(v["a"])(e,[{key:"createAccount",value:function(){var e=this.bitbox.Mnemonic.generate(256),t=this.bitbox.Mnemonic.toSeed(e),n=this.bitbox.HDNode.fromSeed(t,this.network),r=this.bitbox.ECPair.toCashAddress(n.keyPair),a=this.bitbox.ECPair.toLegacyAddress(n.keyPair),o=this.bitbox.ECPair.toWIF(n.keyPair);return{address:r,legacyAddress:a,wif:o}}},{key:"loadBalance",value:function(e){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.loadDetail(e);case 3:return n=t.sent,t.abrupt("return","balance"in n?n.balance:0);case 7:throw t.prev=7,t.t0=t["catch"](0),t.t0;case 10:case"end":return t.stop()}},t,this,[[0,7]])}))}},{key:"loadDetail",value:function(e){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.bitbox.Address.details(e);case 3:return n=t.sent,console.log("loadDetail",n),t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}},t,this,[[0,8]])}))}},{key:"send",value:function(e,t,n,r){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function a(){var o,s,i,c,u,l,d,h,f,v,p,b;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s=new this.bitbox.TransactionBuilder(this.network),i=this.bitbox.ECPair.fromWIF(n),console.log("transactionBuilder",s),a.next=6,this.bitbox.Address.utxo(e);case 6:if(c=a.sent,console.log("utxo",c),!("utxos"in c)){a.next=29;break}return u=c.utxos[0],l=u.satoshis,s.addInput(u.txid,u.vout),console.log("addInput"),d=this.bitbox.BitcoinCash.getByteCount({P2PKH:1},{P2PKH:1}),h=l-d,f=this.bitbox.BitcoinCash.toSatoshi(r),console.log("sendAmount",r,l,h,f,d),s.addOutput(t,f),s.addOutput(e,h-r),console.log("addOutput"),v=void 0,s.sign(0,i,v,s.hashTypes.SIGHASH_ALL,l),p=s.build(),b=p.toHex(),console.log("tx",p,b),a.next=27,this.bitbox.RawTransactions.sendRawTransaction(b);case 27:o=a.sent,console.log("result",o);case 29:a.next=35;break;case 31:throw a.prev=31,a.t0=a["catch"](0),console.error(a.t0),a.t0;case 35:return a.abrupt("return",o);case 36:case"end":return a.stop()}},a,this,[[0,31]])}))}}]),e}(),y=function(){function e(){var t=this;Object(s["a"])(this,e),this.balance=0,this.address="",this.legacyAddress="",this.privateKey="",this.wrapper=new w,this.localStorageKey="bch-wallet",this.load().then(function(e){if(null===e){var n=t.wrapper.createAccount();t.address=n.address,t.legacyAddress=n.legacyAddress,t.privateKey=n.wif,t.save()}else t.address=e.address,t.legacyAddress=e.legacyAddress,t.privateKey=e.privateKey,t.loadBalance()}).catch(function(e){console.error(e)})}return Object(v["a"])(e,[{key:"save",value:function(){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.setItem(this.localStorageKey,this.toJSON());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"load",value:function(){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.getItem(this.localStorageKey);case 2:return t=e.sent,null!==t&&(this.address=t.address,this.privateKey=t.privateKey),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))}},{key:"loadBalance",value:function(){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.wrapper.loadBalance(this.address);case 2:return this.balance=e.sent,e.abrupt("return",this.balance);case 4:case"end":return e.stop()}},e,this)}))}},{key:"send",value:function(e,t){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.wrapper.send(this.address,e,this.privateKey,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"toJSON",value:function(){return{address:this.address,legacyAddress:this.legacyAddress,privateKey:this.privateKey}}}]),e}(),m=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isLoading=!1,e.wallet=new y,e.qrSize=200,e.toAmount=0,e.toAddr="",e.qrJson="",e.validation=[],e.resultMessage="",e.rules={senderAddrInput:function(e){var t=/^[a-zA-Z0-9-]+$/;return t.test(e)||"送金先の入力が不正です"},amountInput:function(e){var t=/^[0-9.]+$/;return t.test(e)&&!isNaN(Number(e))||"数量の入力が不正です"}},e}return Object(u["a"])(t,e),Object(v["a"])(t,[{key:"onValueChange",value:function(e,t){console.log("watch: ".concat(e,", ").concat(t)),this.qrJson=e}},{key:"mounted",value:function(){d["b"].prototype.$toast("Hello BitcoinCash Wallet")}},{key:"loadAccount",value:function(){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.wallet.loadBalance();case 3:this.isLoading=!1;case 4:case"end":return e.stop()}},e,this)}))}},{key:"onSend",value:function(){return l["a"](this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.isValidation()){e.next=19;break}return console.log("OK"),this.resultMessage="",this.isLoading=!0,e.prev=4,e.next=7,this.wallet.send(this.toAddr,this.toAmount);case 7:t=e.sent,n="SUCCESS\n".concat(t),this.resultMessage="txHash: ".concat(t),d["b"].prototype.$toast(n),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),console.error(e.t0),this.resultMessage="Failed ".concat(e.t0),d["b"].prototype.$toast(e.t0);case 18:this.isLoading=!1;case 19:console.log(this.isValidation());case 20:case"end":return e.stop()}},e,this,[[4,13]])}))}},{key:"isValidation",value:function(){return this.validation=[],this.validation.push(this.rules.senderAddrInput(this.toAddr)),this.validation.push(this.rules.amountInput("".concat(this.toAmount))),0===this.validation.filter(function(e){return!0!==e}).length}}]),t}(d["b"]);l["b"]([Object(d["c"])("wallet.legacyAddress")],m.prototype,"onValueChange",null),m=l["b"]([d["a"]],m);var x=m,k=x,A=(n("0c26"),n("2877")),O=Object(A["a"])(k,h,f,!1,null,"6c4f1276",null),j=O.exports,_=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.title="BitcoinCash wallet",e}return Object(u["a"])(t,e),t}(d["b"]);_=l["b"]([Object(d["a"])({components:{Wallet:j}})],_);var S=_,R=S,C=(n("7faf"),Object(A["a"])(R,a,o,!1,null,null,null)),P=C.exports,B=n("8c4f");r["default"].use(B["a"]);var F=new B["a"]({mode:"history",base:"/bch-wallet/",routes:[]}),K=n("2f62");r["default"].use(K["a"]);var q=new K["a"].Store({state:{},mutations:{},actions:{}}),E=n("9483");Object(E["a"])("".concat("/bch-wallet/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var L=n("ce5b"),I=n.n(L),M=n("c0a4"),J=n.n(M),N=(n("cc20"),n("7869")),T=n.n(N),H=n("6112"),$=n.n(H);r["default"].use(I.a,{theme:{original:J.a.purple.base,theme:"#FFDEEA",background:"#FFF6EA",view:"#ffa07a",select:"#FF7F78",button:"#5FACEF"},options:{themeVariations:["original","secondary"]}}),r["default"].use(T.a,{defaultType:"bottom",duration:3e3,wordWrap:!0,width:"280px"}),r["default"].use($.a),r["default"].config.productionTip=!1,new r["default"]({router:F,store:q,render:function(e){return e(P)}}).$mount("#app")}});
//# sourceMappingURL=app.d198243d.js.map